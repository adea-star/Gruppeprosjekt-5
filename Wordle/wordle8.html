<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-image: url('images/stjerne.jpg'); /*Setter bakgrunnsbide*/
            background-size: cover;
            background-position: center;
            font-family: Arial, sans-serif;
            color: white;
        }

        h1 {
            margin-bottom: 20px;
        }

        /* Hvordan Canvaset skal se ut*/
        #canvas-container {
            width: 800px;
            height: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            border: 2px solid white;
            background-color: rgba(0, 0, 0, 0.7); 
            padding: 20px;
            box-sizing: border-box;
        }
        /* Spillet css */
        #game-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5 kolonner for bokstavene */
            gap: 4px;
            width: 100%;
            max-width: 250px; /* Legger til bredde for å få plass */
        }
        /*Definerer stil for bokstav rutene*/
        .tile {
            width: 100%;
            padding-top: 100%; 
            position: relative;
            border: 2px solid #d3d3d3;
            font-size: 1.2em;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-sizing: border-box;
        }

        .tile > span {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /*fargekodene, hvis bokstav er plassert riktig(grønn), hvis bokstav finnes i ordet (gul), og hvis det ikke er i ordet(grå)*/
        .correct { background-color: green; }
        .present { background-color: yellow; color: black; }
        .absent { background-color: gray; }

        /*Tastatur layout*/
        #keyboard {
            display: grid;
            grid-template-columns: repeat(11, 1fr); /* Bokstavene til å trekke seg til sidene */
            gap: 6px;
            width: 100%;
            max-width: 750px; /* Gjør til at det strekker seg mere til sidene for å fylle ut området */
            margin-top: 20px; /* Legger til mellomrom mellom spillet og tastaturet */
        }
        /*oppsettet fo tastene på skjermen*/
        .key {
            width: 100%;
            padding-bottom: 50%; /* Minsker høyden for å lage gjøre tastene mindre vertikalt */
            font-size: 1.0em; /*Justere skriftstørrelsen */
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            border: 1px solid #ddd;
            cursor: pointer;
            background-color: #fff;
            color: black;
            user-select: none;
        }

        .key.gray { background-color: gray; color: white; }
        .key.green { background-color: green; color: white; }
        .key.yellow { background-color: yellow; color: black; }
    </style>
</head>
<body>
    <h1>Wordle</h1>
    <div id="canvas-container">
        <div id="game-board"></div>
        <div id="keyboard"></div>
    </div>

    <script>
        /*Legger ordene i en liste*/
        const words = ["baker", "kaker","papir","banne", "isbre", "farge", "lyset", "smile", "venne", "bilde", "aktør", "blant", "drama",
        "binde", "matte", "grave", "sjakk", "treet", "stort", "skole", "extra", "rekke", "klage",
        "dvale", "plass", "håper", "skala", "radio", "jager", "drage", "ovner", "vifte", "krone",
        "klokt", "fjern", "pakke", "smart", "drift", "låner", "kaste", "ferde", "juble", "vrake",
        "frukt", "trene", "eldre", "gylde", "fyker", "havne", "myter", "gjære", "gjest", "yngre",
        "blodt", "rubin", "kaste", "vokse", "lyder", "spise", "sende", "kjole", "skyte", "telle",
        "korte", "frisk", "skilt", "gråte", "blume", "haler", "snekk", "pride", "snart", "troll",
        "rulle", "veien", "skape", "kappe", "hoppe", "lytte", "stine", "smake", "snepe", "skade",
        "kaste", "felle", "støtt", "lense", "duvet", "felle", "grise", "flate", "damen", "melle",
        "søker", "skift", "skuff", "finns", "skutt", "møteb", "hundt", "alger", "reise", "skeis",
        "skudd", "rente", "vibra", "smått", "smalt", "brent", "satt", "klapp", "dann", "glans", "fløte",
        "kurve", "skår", "ynger", "stive", "skinne", "kratt", "blikk", "kikke", "verne", "varde",
        "kjapp", "bøtte", "drepe", "hoppe", "lyse", "pluss", "stein", "plage", "melet", "skudd",
        "svele", "tanke", "skrin", "jeger", "valgt", "trett", "bløte", "utvik", "skinn", "gilde",
        "vårer", "flere", "ræve", "kropp", "verv", "plått", "bort", "drikk", "glatt", "høyre",
        "takke", "skape", "gande", "brakt", "spank", "skikk", "gjemt", "gavn", "klake", "slott",
        "balje", "fluer", "skive", "kjole", "tilbake", "fenn", "avbit", "laste", "knekt", "sving",
        "perle", "værer", "køle", "plan", "sanne", "fjord", "skrap", "dreit", "bombe", "vedde",
        "vind", "stand", "glen", "skjev", "ruin", "blokk", "slipt", "slake", "flate", "skjel",
        "flott", "sylt", "innhold", "nyhet", "knall", "balle", "gale", "spant", "mark", "hette",
        "krapp", "skamb", "skarf", "skær", "hvit", "vinn", "liv", "styre", "vet", "høst", "fett",
        "malt", "skinn", "tatt", "rike", "tavle", "spor", "skift", "rake", "drepe", "skål", "skalk",
        "klatt", "skarp", "liten", "jakt", "blikk", "kaldt", "skrei", "tøff", "melk", "mat","abakk", "abide", "ablen", "adere", "adder", "afrer", "agere", "aktet", "alarm", "alein", 
        "alene", "alibi", "alkyl", "altor", "ambis", "andre", "anerk", "animo", "arbeid", "arene", 
        "arisk", "aroma", "asken", "asten", "atlas", "avdel", "avers", "avise", "avkast", "bader", 
        "baken", "baker", "balle", "baner", "banke", "baren", "barna", "belen", "benke", "berus", 
        "beset", "beten", "bilde", "binds", "biter", "blikk", "bliss", "blond", "blåse", "bluss", 
        "boker", "bolle", "bombe", "borer", "borte", "brake", "brans", "brann", "brase", "brist", 
        "broer", "brose", "brudd", "bruke", "brukt", "buler", "bytte", "cafea", "citar", "clash", 
        "direk", "dorte", "drage", "drakk", "drama", "dreng", "drive", "dyktig", "dette", "duell", 
        "duett", "dyret", "dyser", "effekt", "eksel", "eklen", "ekte", "eller", "enkel", "enhet", 
        "etnis", "evnen", "ferie", "feste", "fiask", "fiken", "final", "fiske", "flere", "flint", 
        "folie", "forse", "forte", "forts", "frost", "frukt", "fugee", "fugle", "fugle", "fyren", 
        "galne", "garbe", "garde", "gevin", "gevin", "gjelt", "gjøre", "grasp", "grett", "grens", 
        "grene", "gripe", "grunn", "grønn", "grunn", "gulne", "habib", "hager", "hakk", "hange", 
        "hasse", "heike", "helge", "hilde", "hoved", "håper", "huset", "hynse", "høyre", "hytte", 
        "inter", "jakt", "jager", "jalle", "kalte", "kamera", "karer", "karen", "kapse", "kilde", 
        "kilef", "kors", "klappe", "kler", "klare", "klute", "knall", "knelt", "knute", "koer", 
        "kolle", "korre", "korte", "korts", "kuse", "kåpen", "laike", "lager", "laste", "later", 
        "levee", "letts", "lyset", "lyser", "lysere", "lørne", "liten", "liten", "makle", "maner", 
        "marker", "mamma", "mange", "menke", "merke", "merit", "modig", "mulig", "muler", "muse", 
        "muse", "mutter", "møte", "møte", "mørkt", "myte", "norsk", "nasje", "nevn", "normal", 
        "nomin", "nøtte", "nårte", "null", "nikte", "nyhet", "olje", "odde", "oldeb", "onkel", 
        "opple", "opple", "oppe", "parke", "part", "perle", "pose", "pride", "pris", "profi", 
        "rike", "ringe", "ratt", "remse", "runde", "rulle", "ruten", "renne", "reise", "rente", 
        "reste", "ros", "ramme", "raus", "roll", "rakst", "ruke", "ruta", "rull", "rider", 
        "siste", "skive", "skrem", "seier", "såre", "sikkert", "skrap", "stjap", "start", "tart", 
        "terse", "tette", "turt", "tekn", "tilsk", "utry", "vinst", "våk", "vild", "zlie"
        ];

        let targetWord =/*Målordet brukeren gjetter på*/
        let currentRow = 0;
        let currentTile = 0;

        const gameBoard = document.getElementById('game-board');
        const keyboard = document.getElementById('keyboard');

        /*Velger et tilfeldig ord fra ordlisten*/ 
        function chooseWord() {
            targetWord = words[Math.floor(Math.random() * words.length)];
            console.log("Ordet var: ", targetWord); 
            startGame();  /*Starter spillet når ordet er valgt*/ 
        }
        /*Starter spillet ved å lage et brett og tastatur*/
        function startGame() {
            createBoard();
            createKeyboard();
        }

        /*Lager et rutenett 5*7for gjettingene (7forsøk)*/
        function createBoard() {
            for (let i = 0; i < 7; i++) {  /*7 rader som tilsvarer forsøkene til brukeren*/ 
                for (let j = 0; j < 5; j++) {  /*5 kolonner for at det er 5 bokstaver i ordene*/ 
                    const tile = document.createElement('div');
                    tile.classList.add('tile');
                    tile.setAttribute('data-row', i);
                    tile.setAttribute('data-tile', j);

                    const span = document.createElement('span');
                    tile.appendChild(span);

                    gameBoard.appendChild(tile);
                }
            }
        }

        /*Lager tastaturet, inkludert æ,ø,å og en enter-tast*/ 
        function createKeyboard() {
            const keys = "ABCDEFGHIJKLMNOPQRSTUVWXYZÆØÅ";
            keys.split('').forEach(key => {
                const keyElement = document.createElement('div');
                keyElement.classList.add('key');
                keyElement.textContent = key;
                keyElement.setAttribute('data-key', key.toLowerCase());
                keyElement.addEventListener('click', () => handleKeyPress({ key: key }));
                keyboard.appendChild(keyElement);
            });

            /*Enter-tasten*/
            const enterKey = document.createElement('div');
            enterKey.classList.add('key');
            enterKey.textContent = "Enter";
            enterKey.setAttribute('data-key', 'enter');
            enterKey.addEventListener('click', () => submitGuess());
            keyboard.appendChild(enterKey);
        }

        /*Gjør til at man kan trykke på tastene*/
        function handleKeyPress(event) {
            let key = event.key.toUpperCase();

            if (key === "ENTER") {
                if (currentTile === 5) submitGuess(); /*Funker kun når raden er fylt ut*/ 
            } else if (key === "BACKSPACE") {
                if (currentTile > 0) {
                    currentTile--;
                    const tile = document.querySelector(`[data-row='${currentRow}'][data-tile='${currentTile}'] span`);
                    tile.textContent = "";
                }
            } else if (/^[A-ZÆØÅ]$/.test(key) && currentTile < 5) {
                const tile = document.querySelector(`[data-row='${currentRow}'][data-tile='${currentTile}'] span`);
                tile.textContent = key;
                currentTile++;
            }
        }

        /*Sjekker om ordet er gyldig*/ 
        function isValidWord(word) {
            return words.includes(word);
        }

        /*Sender inn gjetningen*/
        function submitGuess() {
            if (!targetWord) {
                alert("Vennligst prøv igjen.");
                return;
            }

            const guess = Array.from(document.querySelectorAll(`[data-row='${currentRow}'] span`))
                .map(tile => tile.textContent.toLowerCase())
                .join('');

            if (guess.length < 5) return;

            /*Sjekker om ordet er gyldig*/ 
            if (!isValidWord(guess)) {
                alert("Ordet du skrev finnes ikke i ordlisten, vennligst prøv igjen.");
                return;
            }

            /*Sjekker om ordet stemmer med løsningsordet*/
            for (let i = 0; i < 5; i++) {
                 const tile = document.querySelector(`[data-row='${currentRow}'][data-tile='${i}']`);
                 const keyElement = document.querySelector(`[data-key='${guess[i]}']`);
                 const letter = guess[i];
                 
                 if (tile.classList.contains('correct')) continue;
                 if (targetWord.includes(letter) && targetLetterCount[letter] > 0) {
                    tile.classList.add('present');
                    keyElement.classList.add('yellow');
                    targetLetterCount[letter] -= 1;
                } else {
                    tile.classList.add('absent');
                    keyElement.classList.add('gray');
                }
            }
            /*finner ut om brukeren ha funnet løsningsordet*/
            if (guess === targetWord) {
                alert("Gratulerer du fant løsningsordet!");
            } else if (currentRow === 6) {  /*7 forsøk*/
                alert(`Du fant ikke løsningsordet, ordet var "${targetWord}".`);
            } else {
                currentRow++;
                currentTile = 0;
            }
        }

        /*Start spillet ved å velge et tilfeldig ord*/
        chooseWord();

        /*Legger til tastetrykk*/ 
        document.addEventListener('keydown', handleKeyPress);
    </script>
</body>
</html>
